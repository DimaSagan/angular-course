import{a as q}from"./chunk-44MNESBS.js";import{a as D,d as $}from"./chunk-XJU4AY4J.js";import{$ as M,Aa as p,Bb as E,Bc as Z,Ca as f,Fb as L,Ga as m,Ia as b,Ja as P,Ka as a,La as r,Ma as l,Pb as F,Qa as O,Ra as c,Rb as z,Sa as x,Y as d,ab as y,bb as S,da as B,ea as w,fb as h,hb as N,ic as j,ka as v,lb as k,mb as R,mc as C,nc as A,oc as V,pc as U,qa as s,ra as u,ya as T,zb as I}from"./chunk-GCWCUMXL.js";function K(o,e){o&1&&l(0,"i",1)}function Q(o,e){o&1&&l(0,"i",2)}function W(o,e){o&1&&l(0,"i",4)}function X(o,e){o&1&&l(0,"i",5)}var H=(()=>{let e=class e{constructor(){this.sortByRating=new v,this.sortByTitle=new v,this.sortButtonByRateType=!0,this.sortButtonByTitleType=!0}ngOnInit(){}sortMoviesByRating(){this.sortByRating.emit(),this.sortButtonByRateType=!this.sortButtonByRateType}sortMoviesByTitle(){this.sortByTitle.emit(),this.sortButtonByTitleType=!this.sortButtonByTitleType}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-sort-bar"]],outputs:{sortByRating:"sortByRating",sortByTitle:"sortByTitle"},standalone:!0,features:[h],decls:8,vars:4,consts:[["title","Sort by rate",3,"click"],[1,"pi","pi-sort-amount-up"],[1,"pi","pi-sort-amount-up-alt"],["title","Sort A-Z",3,"click"],[1,"pi","pi-sort-alpha-up"],[1,"pi","pi-sort-alpha-up-alt"]],template:function(t,n){t&1&&(a(0,"div")(1,"button",0),c("click",function(){return n.sortMoviesByRating()}),p(2,K,1,0,"i",1)(3,Q,1,0,"i",2),r(),a(4,"button",3),c("click",function(){return n.sortMoviesByTitle()}),p(5,W,1,0,"i",4)(6,X,1,0,"i",5),r(),l(7,"p"),r()),t&2&&(s(2),m(2,n.sortButtonByRateType?2:-1),s(),m(3,n.sortButtonByRateType?-1:3),s(2),m(5,n.sortButtonByTitleType?5:-1),s(),m(6,n.sortButtonByTitleType?-1:6))},styles:["div[_ngcontent-%COMP%]{display:flex;gap:10px}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;color:#fff}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}"]});let o=e;return o})();var J=(()=>{let e=class e{transform(i){let t="";return i&&(t=i.replaceAll("_"," ")),t}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=M({name:"titleTransform",type:e,pure:!0,standalone:!0});let o=e;return o})();var Y=(o,e)=>e.id,tt=o=>({load:o});function et(o,e){if(o&1&&l(0,"app-primeng-movie-card",4),o&2){let g=e.$implicit;f("mov",g)}}function it(o,e){if(o&1){let g=O();a(0,"button",6),c("click",function(){B(g);let t=x();return w(t.showMore())}),a(1,"span"),y(2,"show more"),l(3,"i",7),r()()}}var vt=(()=>{let e=class e extends Z{constructor(i,t,n){super(),this.activatedRoute=i,this.store=t,this.router=n,this.data=[],this.sorted=!1,this.currentPage=2,this.showMoreSwitcher=!1,this.load=!1}ngOnInit(){if(this.listName=this.activatedRoute.routeConfig?.path,(this.listName==="watchlist"||this.listName==="favorite")&&(this.showMoreSwitcher=!0),this.listName!=="favorite"&&this.listName!=="watchlist"&&this.listName){let i=sessionStorage.getItem(`${this.listName}`);this.currentPage=i?Number(i):2,this.loadMovieListIfNeeded(this.listName)}setTimeout(()=>{this.load=!0},500)}getMovieList(i){this.store.dispatch(D({listName:i}))}loadMovieListIfNeeded(i){let t=this.store.select(C);switch(i){case"now_playing":t=this.store.select(C);break;case"popular":t=this.store.select(A);break;case"top_rated":t=this.store.select(V);break;case"upcoming":t=this.store.select(U);break}t.subscribe(n=>{n.length===0&&this.getMovieList(i)})}trackById(i,t){return t.id}sortByRating(){this.data&&(this.sorted?(this.data=[...this.data].sort((i,t)=>i.vote_average-t.vote_average),this.sorted=!1):(this.data=[...this.data].sort((i,t)=>t.vote_average-i.vote_average),this.sorted=!0))}sortByTitle(){this.data&&(this.sorted?(this.data=[...this.data].sort((i,t)=>t.title.localeCompare(i.title)),this.sorted=!1):(this.data=[...this.data].sort((i,t)=>i.title.localeCompare(t.title)),this.sorted=!0))}showMore(){let i=this.listName;this.listName&&["now_playing","upcoming","top_rated","popular"].includes(this.listName)?(this.store.dispatch($({listName:i,pageNumber:this.currentPage})),this.currentPage++,sessionStorage.setItem(`${this.listName}`,this.currentPage.toString())):console.error("Invalid list name:",this.listName)}};e.\u0275fac=function(t){return new(t||e)(u(F),u(j),u(z))},e.\u0275cmp=d({type:e,selectors:[["app-movie-list"]],inputs:{data:"data"},standalone:!0,features:[T,h],decls:10,vars:7,consts:[[1,"movie-list",3,"ngClass"],[1,"header"],[3,"sortByRating","sortByTitle"],[1,"content"],[3,"mov"],["class","show-more-button",3,"click",4,"ngIf"],[1,"show-more-button",3,"click"],[1,"pi","pi-arrow-circle-down"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),y(3),k(4,"titleTransform"),r(),a(5,"app-sort-bar",2),c("sortByRating",function(){return n.sortByRating()})("sortByTitle",function(){return n.sortByTitle()}),r()(),a(6,"div",3),b(7,et,1,1,"app-primeng-movie-card",4,Y),r(),p(9,it,4,0,"button",5),r()),t&2&&(f("ngClass",N(5,tt,n.load)),s(3),S(R(4,3,n.listName)),s(4),P(n.data),s(2),f("ngIf",!n.showMoreSwitcher))},dependencies:[L,I,E,q,H,J],styles:['.movie-list[_ngcontent-%COMP%]{opacity:0;transition:.4s}.movie-list.load[_ngcontent-%COMP%]{opacity:1}.header[_ngcontent-%COMP%]{width:100%;display:flex;padding:1.25rem 0;justify-content:space-between}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:25px;font-weight:500;letter-spacing:1px;text-transform:capitalize;flex-grow:1;display:flex;text-wrap:nowrap;align-items:center;gap:.3125rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:after{content:"";width:100%;height:1.5px;background:#fffcfc;background:linear-gradient(90deg,#fffcfceb 33%,#fff0);display:block}.content[_ngcontent-%COMP%]{width:100%;display:grid;gap:.625rem;grid-template-columns:repeat(auto-fill,minmax(185px,1fr));grid-auto-rows:1fr}@media (min-width: 61.93625em){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:.9375rem}}.content[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.625em}.show-more-button[_ngcontent-%COMP%]{width:100%;position:relative;background:#07070700;padding:2.5rem 0;transition:.5s}.show-more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:capitalize;display:flex;justify-content:center;gap:.3125rem;align-items:center;flex-shrink:1;color:#fff;position:relative;z-index:1;transition:.5s ease;font-size:1.25rem;font-weight:500}.show-more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;transition:.5s ease-in}.show-more-button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:scale(1.1)}.show-more-button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:rotate(360deg)}.show-more-button[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%]{transform:scale(1.05)}']});let o=e;return o})();export{vt as a};
